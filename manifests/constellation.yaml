# extra configuration used by constellation

modules:
  enable:
    - cri-o:1.20

repos:
  - kubernetes
  - fedora
  - fedora-modular
  - fedora-updates-modular

repo-packages:
  - repo: kubernetes
    packages:
      - kubelet
      - kubeadm
      - kubectl
  - repo: fedora
    packages:
      - conntrack-tools
  - repo: fedora-coreos-pool
    packages:
      - veritysetup

packages:
  - cri-o

postprocess:
  # empty /etc/cni/net.d as crio rpm has bad default config there
  - |
    #!/usr/bin/env bash
    set -xeuo pipefail
    rm -rf /etc/cni/net.d/*
